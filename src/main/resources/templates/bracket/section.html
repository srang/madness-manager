<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<body>
<div th:fragment="info(bracket)" class="row">
    Bracket Name
    <div class="col-sm-6">
        <div class="form-group">
            <h4 th:text="${bracket.name}"></h4>
        </div>
    </div>
</div>
<div th:fragment="first_rounds(regionLeft,regionRight)">
    <div class="col-md-2 bracket-round round-one"
         th:with="round = ${T(com.github.srang.madness.model.types.Round).SALACIOUS}">
        <h4 class="bracket-round-title" th:text="|${round.label()} ${regionLeft.value()}|"></h4>
        <div th:each="index : ${@bracketService.getRoundRegionGameIds(round,regionLeft)}">
            <div th:replace="bracket/element :: game_button(__${round.id()}__,__${index}__)"></div>
        </div>
    </div><!--
    --><div class="col-md-2 bracket-round round-two"
         th:with="round = ${T(com.github.srang.madness.model.types.Round).TITILATING}">
        <h4 class="bracket-round-title" th:text="|${round.label()} ${regionLeft.value()}|"></h4>
        <div th:each="index : ${@bracketService.getRoundRegionGameIds(round,regionLeft)}">
            <div th:replace="bracket/element :: game_button(__${round.id()}__,__${index}__)"></div>
            <br/>
        </div>
    </div><!--
    --><div class="col-md-2 bracket-round round-three"
         th:with="round = ${T(com.github.srang.madness.model.types.Round).SWEET}">
        <h4 class="bracket-round-title" th:text="|${round.label()} ${regionLeft.value()}|"></h4>
        <div th:each="index : ${@bracketService.getRoundRegionGameIds(round,regionLeft)}">
            <div th:replace="bracket/element :: game_button(__${round.id()}__,__${index}__)"></div>
            <br/><br/>
        </div>
    </div><!--
    --><div class="col-md-2 bracket-round round-three"
         th:with="round = ${T(com.github.srang.madness.model.types.Round).SWEET}">
        <h4 class="bracket-round-title" th:text="|${round.label()} ${regionRight.value()}|"></h4>
        <div th:each="index : ${@bracketService.getRoundRegionGameIds(round,regionRight)}">
            <div th:replace="bracket/element :: game_button(__${round.id()}__,__${index}__)"></div>
            <br/><br/>
        </div>
    </div><!--
    --><div class="col-md-2 bracket-round round-two"
         th:with="round = ${T(com.github.srang.madness.model.types.Round).TITILATING}">
        <h4 class="bracket-round-title" th:text="|${round.label()} ${regionRight.value()}|"></h4>
        <div th:each="index : ${@bracketService.getRoundRegionGameIds(round,regionRight)}">
            <div th:replace="bracket/element :: game_button(__${round.id()}__,__${index}__)"></div>
            <br/>
        </div>
    </div><!--
    --><div class="col-md-2 bracket-round round-one"
         th:with="round = ${T(com.github.srang.madness.model.types.Round).SALACIOUS}">
        <h4 class="bracket-round-title" th:text="|${round.label()} ${regionRight.value()}|"></h4>
        <div th:each="index : ${@bracketService.getRoundRegionGameIds(round,regionRight)}">
            <div th:replace="bracket/element :: game_button(__${round.id()}__,__${index}__)"></div>
        </div>
    </div>
</div>
<div th:fragment="last_rounds">
    <div class="bracket-row" th:with="
        regionA=${T(com.github.srang.madness.model.types.Region.RegionType).REGION_A},
        regionB=${T(com.github.srang.madness.model.types.Region.RegionType).REGION_B},
        regionC=${T(com.github.srang.madness.model.types.Region.RegionType).REGION_C},
        regionD=${T(com.github.srang.madness.model.types.Region.RegionType).REGION_D},
        ">
        <div class="col-md-2 bracket-round"
             th:with="round = ${T(com.github.srang.madness.model.types.Round).ELITE}">
            <h4 class="bracket-round-title" th:text="|${regionA.value()} Finals|"></h4>
            <div th:replace="bracket/element :: game_button(__${round.id()}__,1)"></div>

            <br /><br />
            <h4 class="bracket-round-title" th:text="|${regionC.value()} Finals|"></h4>
            <div th:replace="bracket/element :: game_button(__${round.id()}__,3)"></div>
        </div><!--
     --><div class="col-md-8 bracket-round">
            <div class="col-md-6 col-md-offset-3"
                 th:with="round = ${T(com.github.srang.madness.model.types.Round).FINAL}">
                <h4 class="bracket-round-title" th:text="${round.label()}"></h4>
                <div th:replace="bracket/element :: game_button(__${round.id()}__,1)"></div>
            </div><!--
         --><div th:with="round = ${T(com.github.srang.madness.model.types.Round).CHAMPIONSHIP}">
                <div class="col-md-8 col-md-offset-2">
                    <h4 class="bracket-round-title" th:text="${round.label()}"></h4>
                    <div th:replace="bracket/element :: game_button(__${round.id()}__,1)"></div>
                </div>
            </div><!--
         --><div class="col-md-6 col-md-offset-3"
                th:with="round = ${T(com.github.srang.madness.model.types.Round).FINAL}">
                <h4 class="bracket-round-title" th:text="${round.label()}"></h4>
                <div th:replace="bracket/element :: game_button(__${round.id()}__,2)"></div>
            </div>
        </div><!--
    --><div class="col-md-2 bracket-round"
             th:with="round = ${T(com.github.srang.madness.model.types.Round).ELITE}">
            <h4 class="bracket-round-title" th:text="|${regionB.value()} Finals|"></h4>
            <div th:replace="bracket/element :: game_button(__${round.id()}__,2)"></div>

            <br /><br />
            <h4 class="bracket-round-title" th:text="|${regionD.value()} Finals|"></h4>
            <div th:replace="bracket/element :: game_button(__${round.id()}__,4)"></div>
        </div>
    </div>
</div>
<div th:fragment="form(bracketForm, bracketLink)">
    <!-- Bracket Form -->
    <form th:object="${bracketForm}" th:action="@{__${bracketLink}__}"  role="form" method="post">
        <div>
            <div class="row">
                <!-- Bracket Name -->
                <div class="col-sm-6">
                    <div class="form-group">
                        <label for="bracket-name" class="col-sm-3 control-label">Bracket Name</label>
                        <input type="text" th:field="*{name}" placeholder="Bracket Name" id="bracket-name"
                               class="form-control"/>
                    </div>
                </div>
                <div sec:authorize="hasRole('ROLE_ADMIN')" th:if="${mode == 'admin'}">
                    <div class="col-md-6">
                        <label class="col-sm-3 control-label">Bracket Owner</label>
                        <input type="text" th:field="*{user}"/>
                    </div>
                </div>
                <div th:if="${mode == 'edit'}">
                    <input type="text" th:field="*{user}"/>
                </div>
                <div th:if="${mode == 'user'}">
                    <input type="text" th:field="*{user}"/>
                </div>
            </div>

            <div th:each="round : ${@bracketService.rounds()}" class="hide">
                <p th:text="${round.label()}"></p>
                <div th:each="index : ${#numbers.sequence(1, round.games())}">
                    <input type="text" th:field="*{games[__${round.id()}__][__${index}__].teamA}"
                           th:id="|G-${round.id()}-${index}-A|" th:class="team-input"/>
                    <input type="text" th:field="*{games[__${round.id()}__][__${index}__].teamB}"
                           th:id="|G-${round.id()}-${index}-B|" th:class="team-input"/>
                </div>
            </div>
        </div>
        <button type="submit" id="bracket-submit-actual" class="hide"></button>
    </form>
</div>
</body>
</html>